# Bienvenido a Pixdex 游녦

## Pasos para levantar la app

### Prerrequisitos
* *Node.js* instalado (versi칩n 18 o superior).
* *Git* instalado.
* Recomendado: App *Expo Go* instalada en tu celular (Android o iOS).

1. **Clonar el repositorio**
   Abre tu terminal en el directorio que desees clonar el proyecto y ejecuta:
   ```bash
   git clone "https://github.com/yatenbueno/Pixdex.git"
   cd pixdex
   ```

2. Instalar dependencias
   ```bash
   npm install
   ```
   # O si usas Yarn: yarn install

3. Configurar del backend (Supabase)
   3.1 Crear o iniciar sesi칩n en tu cuenta
   3.2 Navegar a https://supabase.com/
   3.3 Clickear en "Start your project" y crear un proyecto nuevo.
   3.4 Crear un archivo con el nombre '.env.local' en el directorio ra칤z del proyecto y pegar lo siguiente:

       EXPO_PUBLIC_SUPABASE_URL={tu_project_url}
       EXPO_PUBLIC_SUPABASE_ANON_KEY={tu_anon_key}

   3.4 Ingresar a "Project Settings" ubicado en la barra desplegable lateral izquierda de Supabase. 
   3.5 En la pesta침a de Supabase en la barra desplegable lateral izquierda en el apartadado "Data API" se
       encuentra la clave para pegar en 'EXPO_PUBLIC_SUPABASE_URL'
   3.6 En la pesta침a de Supabase en la barra desplegable lateral izquierda en el apartadado "API Keys"
       en la pesta침a "Legacy anon, service_roleplay API Keys" se encuentra la clave para pegar en
       'EXPO_PUBLIC_SUPABASE_ANON_KEY'
   3.7 En la pesta침a de Supabase en la barra desplegable lateral izquierda en el apartadado "SQL Editor"
       pegar el siguiente c칩digo y apretar "Run":

       -- 1. Crear la Tabla (Donde se guardan todas las partidas)
       create table public.ahorcado_scores (
       id bigint generated by default as identity primary key,
       created_at timestamp with time zone default timezone('utc'::text, now()) not null,
       username text not null,
       score bigint not null,
       user_id uuid references auth.users not null
       );

       -- 2. Habilitar Seguridad (RLS)
       alter table public.ahorcado_scores enable row level security;

       -- 3. Pol칤ticas de Seguridad (Policies)

       -- Pol칤tica de Inserci칩n: Permite que el usuario guarde SU propio puntaje
       create policy "Usuarios pueden insertar su propio puntaje"
       on public.ahorcado_scores
       for insert
       to authenticated
       with check ( true );

       -- Pol칤tica de Lectura: Permite que todos (p칰blico) lean los puntajes para armar el ranking
       create policy "Cualquiera puede ver los puntajes"
       on public.ahorcado_scores
       for select
       using ( true );

       -- 4. Habilitar Realtime (Importante para que se actualice solo)
       alter publication supabase_realtime add table public.ahorcado_scores;

       -- 5. Vista para acceder r치pidamente al ranking 
       CREATE VIEW ranking_ahorcado_view AS
       SELECT
       MAX(username) as username, 
       MAX(score) as score
       FROM 
       ahorcado_scores
       WHERE 
       user_id IS NOT NULL
       GROUP BY 
       user_id;
   
4. OPCIONAL: Desactivar la confirmaci칩n de email.
   4.1 Ingresar a "Authentication" en la barra desplegable lateral izquierda en Supabase.
   4.2 En la pesta침a lateral "Configuration" ingresar a "Sign In / Providers"
   4.3 En "User Signups" desactivar la opci칩n "Confirm Email" y clickear "Save Changes"

4. Iniciar la app
   ```bash
   npx expo start
   ```
   Una vez iniciado se puede iniciar la app desde Expo Go App desde un tel칠fono copiando el QR.
   Tambi칠n puede iniciarse mediante web con el link que se genera para 'web'
   o clickeando la letra 'a' para ejecutar el Android Emulator si es que se tiene instalado
   y configurado.